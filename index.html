<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
        <style>
          body{
              background: aquamarine;
            text-align: center;
            color: black;
              font-family: 'Do Hyeon', sans-serif;
          }
          h2{
              margin: 3rem auto; font-size: 2.5rem;
          }
          .every_card{
            width: 90%; margin: 1rem auto;
          }
          .card{width: 22%; height: 35rem;display: inline-block; margin: 0 auto; margin-bottom: 4rem} .card-body{height: 15rem; }  .card-title{font-size: 0.8rem;}  .card-text{font-size: 0.8rem}
            .categoty{margin: 3rem auto}
            #cook{text-align: center; transform: scale(1.5)}
        </style>
        <title>Blogger Search</title>
    </head>
    <body>
        <h2>카테고리별 블로거 검색</h2>
        <input type="text"  id="cook" onkeydown="cook()">
        <h3 class="categoty"></h3>
        <div class = "every_card">
<!--          <div class="card">-->
<!--            <img src= "" class="card-img-top" alt="...">-->
<!--            <div class="card-body">-->
<!--              <h5 class="card-title">Card title</h5>-->
<!--              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>-->
<!--              <a href="#" class="btn btn-primary">Go somewhere</a>-->
<!--            </div>-->
<!--          </div> &ensp;-->
        </div>

      <script>

        function cook(){
            if(event.keyCode == 13){
                            $('.categoty').html("");
            $('.every_card').html("");
            $('.categoty').html(document.getElementById('cook')['value'] + ' 관련 Bloggers')
            var cook = document.getElementById('cook')['value']
            $.ajax({
              type: "GET",
              url: "/test?dish="+ cook,
              data: {},
              success: function(response){
                 for (var i = 0; i < response.length; i ++) {
                     var each = response[i]
                     var pd = each['postdate']
                     var li = each['link']
                     var ti = each['title']
                     var bn = each['bloggername']
                     $.ajax({
                        type: "GET",
                        url: "/link?link="+ li,
                        data: {},
                        success: function(response){
                            var thumb_sent = response['url']
                            var title_sent = response['title']
                            var link_sent = response['link']
                            var descrip_sent = response['descrip']
                            var card_text = '<div class="card">\n' +
                                '   <img src= "'+ thumb_sent +'" class="card-img-top" alt="...">\n' +
                                '   <div class="card-body">\n' +
                                '     <h5 class="card-title">' + title_sent + '</h5>\n' +
                                '     <p class="card-text">' + descrip_sent + '</p>\n' +
                                '     <button type="button" class="btn btn-info" onclick="window.open(\''+ link_sent +'\')">블로그 방문</button>\n' +
                                '   </div>\n' +
                                '</div> &ensp;';
                            $('.every_card').append(card_text)
                        }
                     })

                 }
              }
            })

            }
        }

      </script>
    </body>
</html>